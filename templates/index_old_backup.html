<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitor Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-server"></i>
                <h1>System Monitor</h1>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-page="overview">
                    <i class="fas fa-dashboard"></i>
                    <span>Overview</span>
                </a>
                <a href="#server-status" class="nav-item" data-page="server-status">
                    <i class="fas fa-server"></i>
                    <span>Server Status</span>
                </a>
                <a href="#hardware" class="nav-item" data-page="hardware">
                    <i class="fas fa-microchip"></i>
                    <span>Hardware</span>
                </a>
                <a href="#network" class="nav-item" data-page="network">
                    <i class="fas fa-network-wired"></i>
                    <span>Network</span>
                </a>
                <a href="#services" class="nav-item" data-page="services">
                    <i class="fas fa-cogs"></i>
                    <span>Services</span>
                </a>
                <a href="#processes" class="nav-item" data-page="processes">
                    <i class="fas fa-tasks"></i>
                    <span>Processes</span>
                </a>
                <a href="#security" class="nav-item" data-page="security">
                    <i class="fas fa-shield-alt"></i>
                    <span>Security</span>
                </a>
                <a href="#storage" class="nav-item" data-page="storage">
                    <i class="fas fa-hdd"></i>
                    <span>Storage</span>
                </a>
                <a href="#docker" class="nav-item" data-page="docker">
                    <i class="fab fa-docker"></i>
                    <span>Docker</span>
                </a>
                <a href="#logs" class="nav-item" data-page="logs">
                    <i class="fas fa-file-alt"></i>
                    <span>Logs</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="author-info">
                    <div class="author-name">M. Nafiurohman</div>
                    <div class="author-links">
                        <a href="https://nafiurohman.pages.dev" target="_blank" title="Website">
                            <i class="fas fa-globe"></i>
                        </a>
                        <a href="https://github.com/nafiurohman" target="_blank" title="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://linkedin.com/in/nafiurohman" target="_blank" title="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:nafiurohman25@gmail.com" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                        <a href="https://wa.me/6281358198565" target="_blank" title="WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div class="donation-box">
                    <div class="donation-title">
                        <i class="fas fa-coffee"></i> Belikan Developer Kopi
                    </div>
                    <div class="donation-info">
                        <div class="bank-name">Bank BCA</div>
                        <div class="account-number" id="accountNumber">7625252881</div>
                        <div class="account-name">M. Nafiurohman</div>
                        <button class="copy-btn" onclick="copyAccount()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="topbar">
                <div class="page-title">
                    <i class="fas fa-dashboard"></i>
                    <span id="currentPageTitle">Overview</span>
                </div>
                <div class="topbar-info">
                    <div class="author-badge">by M. Nafiurohman</div>
                    <div class="refresh-indicator">
                        <i class="fas fa-sync-alt"></i>
                        <span>Auto-refresh: 3s</span>
                    </div>
                    <div class="server-time" id="serverTime">--:--:--</div>
                </div>
            </div>

            <!-- Dynamic Page Container - Lazy Loaded -->
            <div id="page-container" class="page-content active">
                <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
            </div>
        </main>
                <div class="grid-4">
                    <div class="card status-card">
                        <div class="card-body compact text-center">
                            <div class="status-icon" id="server-online-status">
                                <i class="fas fa-circle"></i>
                            </div>
                            <div class="status-label">Server Status</div>
                            <div class="status-value" id="server-status-text">Online</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-body compact text-center">
                            <div class="status-icon text-info">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="status-label">Uptime</div>
                            <div class="status-value" id="status-uptime">-</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-body compact text-center">
                            <div class="status-icon text-warning">
                                <i class="fas fa-plug"></i>
                            </div>
                            <div class="status-label">Open Ports</div>
                            <div class="status-value" id="status-ports">-</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-body compact text-center">
                            <div class="status-icon text-success">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="status-label">Connections</div>
                            <div class="status-value" id="status-connections">-</div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-cogs"></i>
                            <h3>Running Services</h3>
                        </div>
                        <div class="card-body" id="status-services">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-plug"></i>
                            <h3>Listening Ports</h3>
                        </div>
                        <div class="card-body" id="status-listening-ports">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-chart-line"></i>
                        <h3>Resource Usage</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid-3">
                            <div>
                                <div class="metric-label">CPU Load</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="status-cpu-bar" style="width: 0%"></div>
                                </div>
                                <div class="metric-small" id="status-cpu-text">0%</div>
                            </div>
                            <div>
                                <div class="metric-label">Memory Usage</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="status-mem-bar" style="width: 0%"></div>
                                </div>
                                <div class="metric-small" id="status-mem-text">0%</div>
                            </div>
                            <div>
                                <div class="metric-label">Disk Usage</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="status-disk-bar" style="width: 0%"></div>
                                </div>
                                <div class="metric-small" id="status-disk-text">0%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>System Alerts</h3>
                        </div>
                        <div class="card-body" id="status-alerts">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-tasks"></i>
                            <h3>Top Processes</h3>
                        </div>
                        <div class="card-body" id="status-top-processes">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Overview Page -->
            <div id="overview-page" class="page-content active">
                <div class="grid-4">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-server"></i>
                            <h3>System</h3>
                        </div>
                        <div class="card-body compact">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-microchip"></i>
                            <h3>CPU</h3>
                        </div>
                        <div class="card-body compact">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-memory"></i>
                            <h3>Memory</h3>
                        </div>
                        <div class="card-body compact">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-hdd"></i>
                            <h3>Disk</h3>
                        </div>
                        <div class="card-body compact">
                            <div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Loading...</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-chart-line"></i>
                        <h3>CPU Usage History</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="cpuChart" height="80"></canvas>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-area"></i>
                            <h3>Memory Usage History</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="memChart" height="100"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-bar"></i>
                            <h3>Network Traffic</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="netChart" height="100"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hardware Page -->
            <div id="hardware-page" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-microchip"></i>
                        <h3>CPU Information</h3>
                    </div>
                    <div class="card-body" id="hardware-cpu">
                        <div class="loading">Loading...</div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-memory"></i>
                            <h3>Memory Details</h3>
                        </div>
                        <div class="card-body" id="hardware-memory">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-hdd"></i>
                            <h3>Disk Details</h3>
                        </div>
                        <div class="card-body" id="hardware-disk">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Network Page -->
            <div id="network-page" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-network-wired"></i>
                        <h3>Network Interfaces</h3>
                    </div>
                    <div class="card-body" id="network-interfaces">
                        <div class="loading">Loading...</div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-plug"></i>
                            <h3>Connections</h3>
                        </div>
                        <div class="card-body" id="network-connections">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Firewall</h3>
                        </div>
                        <div class="card-body" id="network-firewall">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services Page -->
            <div id="services-page" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-cogs"></i>
                        <h3>System Services</h3>
                    </div>
                    <div class="card-body" id="services-list">
                        <div class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Processes Page -->
            <div id="processes-page" class="page-content">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-microchip"></i>
                            <h3>Top CPU Processes</h3>
                        </div>
                        <div class="card-body" id="processes-cpu">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-memory"></i>
                            <h3>Top Memory Processes</h3>
                        </div>
                        <div class="card-body" id="processes-memory">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Page -->
            <div id="security-page" class="page-content">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-user-shield"></i>
                            <h3>Logged Users</h3>
                        </div>
                        <div class="card-body" id="security-users">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Failed Login Attempts</h3>
                        </div>
                        <div class="card-body" id="security-failed">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Storage Page -->
            <div id="storage-page" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-hdd"></i>
                        <h3>Storage Details</h3>
                    </div>
                    <div class="card-body" id="storage-details">
                        <div class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Docker Page -->
            <div id="docker-page" class="page-content">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <i class="fab fa-docker"></i>
                            <h3>Containers</h3>
                        </div>
                        <div class="card-body" id="docker-containers">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-box"></i>
                            <h3>Images</h3>
                        </div>
                        <div class="card-body" id="docker-images">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs Page -->
            <div id="logs-page" class="page-content">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-file-alt"></i>
                        <h3>System Logs</h3>
                        <button class="export-btn" onclick="exportLogs('syslog')">
                            <i class="fas fa-download"></i> Export JSON
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="log-container" id="logs-syslog">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-key"></i>
                        <h3>Authentication Logs</h3>
                        <button class="export-btn" onclick="exportLogs('auth')">
                            <i class="fas fa-download"></i> Export JSON
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="log-container" id="logs-auth">
                            <div class="loading">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="footer-watermark">System Monitor Dashboard by M. Nafiurohman</div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</body>
</html>
